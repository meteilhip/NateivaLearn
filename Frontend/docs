Parfait ğŸ’¯
On reprend proprement en supposant que :

âœ… Les **deux utilisateurs existent dÃ©jÃ **

* `User(role = student)`
* `User(role = teacher)`
  âœ… Auth dÃ©jÃ  en place
  âœ… Session JWT fonctionnelle

Donc maintenant on parle **fonctionnement produit interne**, pas crÃ©ation de comptes.

On pense modÃ¨le type Preply.

---

# ğŸ§  Logique globale (AprÃ¨s crÃ©ation des users)

Une fois connectÃ© :

* Si `role = student` â†’ Dashboard Ã‰lÃ¨ve
* Si `role = teacher` â†’ Dashboard Enseignant

Tout tourne autour de :

```
TeacherProfile
Availability
Booking
Payment
LiveSession
Review
```

---

# 1ï¸âƒ£ SECTION **COURS**

(= LeÃ§ons rÃ©servÃ©es, pas modules)

---

## ğŸ“ Ã‰lÃ¨ve (dÃ©jÃ  connectÃ©)

Il peut :

### ğŸ” 1. Voir les enseignants disponibles

* Liste filtrable :

  * Langue
  * Prix
  * DisponibilitÃ©
  * Note
* AccÃ©der au profil enseignant

---

### ğŸ‘¤ 2. Voir un profil enseignant

Le profil doit afficher :

* Photo
* Bio
* Langues parlÃ©es
* Prix / heure
* DisponibilitÃ©s dynamiques
* Note moyenne
* Nombre dâ€™Ã©lÃ¨ves
* VidÃ©o prÃ©sentation

---

### ğŸ“… 3. RÃ©server un crÃ©neau

Flow :

1. SÃ©lection date
2. SÃ©lection heure
3. VÃ©rification disponibilitÃ©
4. CrÃ©ation `booking (pending)`
5. Paiement
6. Booking devient `confirmed`

---

### ğŸ“š 4. Voir ses leÃ§ons

Deux blocs :

* ğŸŸ¢ Ã€ venir
* ğŸ“œ Historique

Actions possibles :

* Annuler (si > X heures avant)
* Reprogrammer
* Laisser avis aprÃ¨s session

---

## ğŸ‘¨ğŸ½â€ğŸ« Enseignant (dÃ©jÃ  connectÃ©)

Il peut :

---

### ğŸ‘¤ 1. GÃ©rer son profil public

Modifier :

* Bio
* Prix
* VidÃ©o
* Langues

---

### ğŸ“… 2. GÃ©rer disponibilitÃ©s

* DÃ©finir horaires hebdomadaires
* Bloquer dates spÃ©cifiques
* Ajouter buffer (ex: 15 min entre cours)

---

### ğŸ“– 3. Voir bookings

Statuts possibles :

```
pending
confirmed
completed
cancelled
no_show
```

Il peut :

* Voir prochaines sessions
* Voir Ã©lÃ¨ve
* Ajouter notes internes
* Marquer comme "completed"

---

# 2ï¸âƒ£ SECTION **MESSAGES**

SystÃ¨me central pour conversion.

---

## ğŸ“ Ã‰lÃ¨ve

Peut :

* Ã‰crire Ã  un enseignant avant rÃ©servation
* Continuer discussion aprÃ¨s cours
* Envoyer fichier
* Voir statut online

---

## ğŸ‘¨ğŸ½â€ğŸ« Enseignant

Peut :

* RÃ©pondre aux prospects
* Envoyer support pÃ©dagogique
* Maintenir relation long terme

---

## âš™ï¸ Technique

Tables :

```
Conversations
Messages
```

Relation :

```
conversation_id
sender_id
receiver_id
```

Important :

* Blocage partage email/tÃ©lÃ©phone (modÃ©ration)
* Notification temps rÃ©el (WebSocket)
* Badge unread

---

# 3ï¸âƒ£ SECTION **VISIOCONFÃ‰RENCE**

Accessible uniquement si :

```
booking.status === confirmed
AND now >= booking.start_time - 10min
```

---

## ğŸ“ Ã‰lÃ¨ve

* Rejoindre session
* Activer/dÃ©sactiver camÃ©ra
* Chat intÃ©grÃ©
* Voir tableau

---

## ğŸ‘¨ğŸ½â€ğŸ« Enseignant

* DÃ©marrer session
* Partager Ã©cran
* Envoyer fichiers
* Terminer session

---

## âš™ï¸ Structure

```
LiveSession
booking_id
room_token
started_at
ended_at
```

Option :

* WebRTC natif
* Zoom API
* Jitsi

---

# 4ï¸âƒ£ SECTION **AGENDA**

CÅ“ur du systÃ¨me.

---

## ğŸ“ Ã‰lÃ¨ve

Il voit :

* Ses prochains cours
* Fuseau horaire automatique
* Rappels email
* Option reprogrammer

---

## ğŸ‘¨ğŸ½â€ğŸ« Enseignant

Il voit :

* Planning semaine
* Revenus estimÃ©s
* Nombre de sessions
* Ã‰lÃ¨ves actifs

---

## âš™ï¸ Structure

```
WeeklyAvailability
BlockedDates
Bookings
Timezone
```

Important :

* Conversion timezone automatique
* Verrouillage crÃ©neau aprÃ¨s booking
* Pas de double rÃ©servation (transaction DB)

---

# ğŸ’° Paiement (AprÃ¨s users existants)

Flow sÃ©curisÃ© :

1. Student paie
2. Argent stockÃ© en escrow
3. AprÃ¨s session â†’ transfert vers wallet enseignant
4. Commission plateforme appliquÃ©e

Tables :

```
Payments
Wallet
Transactions
Payouts
```

---

# ğŸ¯ Dashboard Ã‰lÃ¨ve (Post-auth)

* Prochaine leÃ§on
* Bouton "Rejoindre"
* Messages non lus
* Historique
* Recherche prof

---

# ğŸ¯ Dashboard Enseignant (Post-auth)

* Prochaine session
* Total revenus
* Nouveaux messages
* Taux rÃ©ponse
* Planning semaine

---

# ğŸ”¥ DiffÃ©rence clÃ© maintenant

On ne parle plus de crÃ©ation de compte.
On parle de **cycle de vie dâ€™une relation Ã©lÃ¨ve-prof** :

```
Message â†’ RÃ©servation â†’ Paiement â†’ Visio â†’ Feedback â†’ Nouvelle rÃ©servation
```

Câ€™est Ã§a le moteur.

---

# ğŸ§  Architecture minimale viable (MVP solide)

Si tu veux faire Ã§a propre en tant que dev full stack :

PrioritÃ© 1 :

* Booking Engine sans bug
* Gestion timezone propre
* Paiement sÃ©curisÃ©
* WebSocket messaging

PrioritÃ© 2 :

* Avis
* Statistiques
* Wallet interne

---

Si tu veux, je peux maintenant te faire :

* ğŸ”¥ SchÃ©ma base de donnÃ©es complet (PostgreSQL)
* ğŸ”¥ Flow backend Express / Nest
* ğŸ”¥ Structure front React propre
* ğŸ”¥ Diagramme logique complet

On construit Ã§a version architecte maintenant ?



---

# âœ… PROMPT Ã€ DONNER Ã€ AUTO (CURSOR)

---

Tu vas continuer le dÃ©veloppement du projet frontend existant.

âš ï¸ IMPORTANT :

* âŒ Tu ne dois **rien supprimer** du code existant.
* âŒ Tu ne dois **pas recommencer lâ€™architecture**.
* âŒ Tu ne touches pas au Backend.
* âŒ Tu ne modifies pas les dashboards existants.
* âŒ On ne dÃ©veloppe PAS la visio pour lâ€™instant.
* âœ… Tu dois continuer avec la base actuelle.
* âœ… Tu dois garder la mÃªme dynamique UI/UX (design, animations, transitions).
* âœ… Tu dois rÃ©utiliser les composants existants dans `shared`.
* âœ… Le code doit Ãªtre ultra commentÃ©.

---

# ğŸ¯ OBJECTIF

On veut implÃ©menter le fonctionnement type **Preply**, mais uniquement cÃ´tÃ© **Frontend**, en utilisant des **donnÃ©es fictives via le store** pour simuler le rendu.

Les utilisateurs existent dÃ©jÃ  :

* `User(role = student)`
* `User(role = teacher)`
* Auth OK
* Session JWT OK

On parle uniquement du **cycle produit interne**.

---

# ğŸ“‚ STRUCTURE Ã€ RESPECTER

CÃ´tÃ© student :

* `StudentCourses` â†’ section Cours
* `StudentChat` â†’ section Messages
* `StudentCalendar` â†’ section Agenda

CÃ´tÃ© teacher :

* `roles/teacher/pages`

  * CrÃ©er uniquement les fichiers manquants
  * Ne pas recrÃ©er ce qui existe dÃ©jÃ 

Tu dois rÃ©utiliser :

* `shared`
* `store`
* `i18n` (complÃ©ter les traductions)

Tu peux crÃ©er les fichiers nÃ©cessaires si besoin,
mais toujours en tâ€™appuyant sur lâ€™existant.

---

# ğŸ§  LOGIQUE PRODUIT Ã€ IMPLÃ‰MENTER (FRONTEND UNIQUEMENT)

On reproduit ce cycle :

```
Message â†’ RÃ©servation â†’ Paiement â†’ Session â†’ Feedback â†’ Nouvelle rÃ©servation
```

âš ï¸ Pour lâ€™instant :

* Pas de backend
* Pas de WebSocket rÃ©el
* Pas de paiement rÃ©el
* Pas de visio
* Tout est mockÃ© dans le store

---

# 1ï¸âƒ£ STUDENT â€“ SECTION COURS (`StudentCourses`)

ImplÃ©menter :

### ğŸ” Liste des enseignants disponibles (mock)

* Filtre langue
* Filtre prix
* Filtre note
* DisponibilitÃ©s simulÃ©es

### ğŸ‘¤ Profil enseignant

Afficher :

* Photo
* Bio
* Langues
* Prix
* DisponibilitÃ©s dynamiques mockÃ©es
* Note
* Nombre dâ€™Ã©lÃ¨ves

### ğŸ“… RÃ©servation mock

Flow simulÃ© :

1. SÃ©lection date
2. SÃ©lection heure
3. CrÃ©ation booking `pending`
4. Paiement simulÃ©
5. Booking devient `confirmed`

âš ï¸ Tout via le store avec donnÃ©es fictives.

### ğŸ“š Mes leÃ§ons

Deux sections :

* Ã€ venir
* Historique

Actions simulÃ©es :

* Annuler
* Reprogrammer
* Laisser un avis

---

# 2ï¸âƒ£ STUDENT â€“ SECTION MESSAGES (`StudentChat`)

Simuler :

* Conversations existantes
* Liste Ã  gauche
* Messages Ã  droite
* Badge unread
* Statut online mockÃ©

Les messages doivent Ãªtre stockÃ©s dans le store.

Important :
Le code doit Ãªtre prÃ©parÃ© pour futur WebSocket,
mais pour lâ€™instant on reste en simulation locale.

---

# 3ï¸âƒ£ STUDENT â€“ SECTION AGENDA (`StudentCalendar`)

Afficher :

* Planning semaine
* Prochains cours
* Fuseau horaire simulÃ©
* Bouton reprogrammer

Mock :

* WeeklyAvailability
* BlockedDates
* Bookings

---

# 4ï¸âƒ£ TEACHER â€“ PAGES Ã€ CRÃ‰ER SI MANQUANTES

Dans `roles/teacher/pages` :

CrÃ©er uniquement les pages manquantes pour :

* Gestion profil public
* Gestion disponibilitÃ©s
* Liste bookings
* Agenda enseignant

RÃ©utiliser les composants `shared`.

Ne pas toucher au dashboard existant.

---

# ğŸ’¬ CODE ULTRA COMMENTÃ‰ (OBLIGATOIRE)

Chaque fichier doit contenir des commentaires explicatifs trÃ¨s clairs :

Exemple :

```ts
/**
 * ğŸ“ CÃ”TÃ‰ Ã‰LÃˆVE :
 * - Peut consulter enseignants
 * - Peut rÃ©server crÃ©neau
 * - Peut payer
 * - Peut annuler si dÃ©lai respectÃ©
 *
 * ğŸ‘¨ğŸ½â€ğŸ« CÃ”TÃ‰ ENSEIGNANT :
 * - DÃ©finit ses disponibilitÃ©s
 * - ReÃ§oit rÃ©servation
 * - Marque session completed
 */
```

Les commentaires doivent expliquer :

* Ce que fait lâ€™Ã©lÃ¨ve
* Ce que fait lâ€™enseignant
* Ce que fera le backend plus tard
* OÃ¹ sera branchÃ© le WebSocket
* OÃ¹ sera branchÃ© Stripe plus tard

---

# ğŸŒ I18N

ComplÃ©ter le dossier `i18n` :

* Ajouter toutes les nouvelles clÃ©s
* Ne pas hardcoder les textes
* Utiliser les traductions existantes

---

# ğŸ¨ UI / UX
ğŸš¨ RÃˆGLE CRITIQUE â€” RÃ‰UTILISABILITÃ‰ ABSOLUE

DÃ¨s quâ€™un morceau de code peut Ãªtre utilisÃ© Ã  plus dâ€™un endroit :

â¡ï¸ Tu DOIS le rendre rÃ©utilisable.

Objectif :
Ã‰viter au maximum la redondance.

Si tu vois par exemple :

Une card teacher utilisÃ©e dans 2 pages â†’ crÃ©er TeacherCard

Un composant de crÃ©neau horaire utilisÃ© cÃ´tÃ© student et teacher â†’ crÃ©er TimeSlot

Un badge status booking utilisÃ© partout â†’ crÃ©er BookingStatusBadge

Une logique de filtre rÃ©pÃ©tÃ©e â†’ crÃ©er un hook custom

Une logique booking partagÃ©e â†’ isoler dans utils ou store helpers

Une modale utilisÃ©e plusieurs fois â†’ crÃ©er composant gÃ©nÃ©rique

* Garder le mÃªme design system
* Garder les animations existantes
* Transitions fluides
* RÃ©utilisable comme `Commencer`
* CohÃ©rence totale avec lâ€™app actuelle

---

# âš ï¸ RÃˆGLES STRICTES

* âŒ Ne pas supprimer du code
* âŒ Ne pas refactor globalement
* âŒ Ne pas toucher backend
* âŒ Ne pas toucher dashboards
* âŒ Ne pas crÃ©er la visio pour lâ€™instant
* âœ… Utiliser donnÃ©es fictives dans store
* âœ… Code modulaire et Ã©volutif
* âœ… Code ultra commentÃ©

---

# ğŸ§  IMPORTANT

On conÃ§oit uniquement le frontend pour visualiser le produit.

Le backend viendra plus tard.

Lâ€™objectif est dâ€™avoir une simulation complÃ¨te fonctionnelle cÃ´tÃ© UI.

---



Parfait.
Je vais te rÃ©diger **exactement le message structurÃ©** que tu vas envoyer Ã  Cursor.

Objectif :
âœ”ï¸ Il ne casse rien
âœ”ï¸ Il respecte lâ€™architecture existante
âœ”ï¸ Il fait du code rÃ©utilisable
âœ”ï¸ Il dÃ©coupe en composants
âœ”ï¸ Il commente
âœ”ï¸ FRONTEND UNIQUEMENT

Tu pourras copier-coller Ã§a dans Cursor.

---

# ğŸ§  MESSAGE Ã€ ENVOYER Ã€ CURSOR

---

## âš ï¸ RÃˆGLES STRICTES

1. Ne modifie rien de la logique existante sauf ce qui est explicitement demandÃ©.
2. Frontend uniquement. Aucun backend.
3. Code modulaire et rÃ©utilisable.
4. Pas de composants trop longs.
5. Composants bien sÃ©parÃ©s.
6. Chaque composant doit Ãªtre commentÃ©.
7. Respecter lâ€™architecture actuelle.
8. RÃ©utiliser les composants existants (TutorCard, CenterCard, CenterDetail, etc).

---

# ğŸ‘¤ COMPTE LEARNER

---

# 1ï¸âƒ£ Dans "Cours"

## ğŸ¯ Modification TutorProfileModal

Quand on ouvre le profil dâ€™un tutor :

### Cas 1 : Learner nâ€™a pas rejoint de centre

Afficher :

* Bouton **RÃ©server un crÃ©neau**
* Bouton **Rejoindre son centre**

### Cas 2 : Learner a dÃ©jÃ  un centre

Afficher :

* Bouton **RÃ©server un crÃ©neau uniquement**

Ne pas modifier le reste de la modal.

---

# 2ï¸âƒ£ Page RÃ©server un crÃ©neau

Quand on clique sur :

* TutorCard â†’ RÃ©server
* TutorProfileModal â†’ RÃ©server

Ouvrir une **page dÃ©diÃ©e** (pas modal).

---

## ğŸ¨ Structure UI

Layout 3 colonnes :

```
| TutorInfo | BookingCalendar | BookingSummary |
```

---

## ğŸŸª Composants Ã  crÃ©er

### 1. `BookingPage`

Conteneur principal.

### 2. `TutorBookingInfo`

Colonne gauche :

* Photo
* Nom
* Prix
* Langue
* Note
* Badge abonnement (actif / aucun)

### 3. `BookingCalendar`

Colonne centrale :

* Mois
* FlÃ¨ches navigation
* Jours disponibles (surlignÃ©s)
* Jours pleins (grisÃ©s)
* SÃ©lection dâ€™un jour
* Affichage crÃ©neaux horaires
* Un seul crÃ©neau sÃ©lectionnable

### 4. `TimeSlotButton`

Bouton rÃ©utilisable pour crÃ©neaux.

### 5. `BookingSummary`

Colonne droite :

* Date
* Heure
* DurÃ©e
* Prix
* Logique hybride affichage UI

---

# ğŸ’³ LOGIQUE HYBRIDE (FRONTEND SIMULÃ‰E)

CrÃ©er un hook :

`useSubscriptionStatus(tutorId)`

Il simule :

* hasActiveSubscription
* remainingHours
* totalHours

---

## ğŸŸ¢ Si abonnement actif

Afficher :

* Message :
  "Vous avez 3 heures restantes"
* Barre progression
* Bouton :
  "Utiliser 1 heure de votre abonnement"

---

## ğŸŸ¡ Si pas dâ€™abonnement

Afficher deux cartes :

### Carte 1

Cours individuel
Prix
Bouton "Payer et rÃ©server"

### Carte 2

Abonnement
1 / 2 / 3 cours semaine
Calcul dynamique :
prix Ã— nombre Ã— 4

Bouton "Sâ€™abonner"

---

# ğŸ” Contrainte importante

Un learner peut avoir :

âœ”ï¸ Plusieurs abonnements avec plusieurs tuteurs
âŒ Ne peut pas rÃ©server 2 cours Ã  la mÃªme heure

CrÃ©er une logique frontend simulÃ©e :

`useBookingConflict()`

Si conflit :
Afficher :

"Vous avez dÃ©jÃ  un cours prÃ©vu Ã  cette heure."
Bouton :
"Voir mon agenda"
"Annuler le cours existant"

---

# ğŸ« SECTION "MON CENTRE" (LEARNER)

Remplacer "Trouver un centre" par "Mon centre"

---

## Si learner a un centre

Afficher :

* Infos centre
* Liste tuteurs du centre
* Utiliser CenterCard

---

## Si learner nâ€™a pas de centre

Afficher :

* Liste centres du systÃ¨me
* Filtres
* Utiliser CenterCard
* Page CenterDetail

---

# ğŸ§  SECTION QUIZ

CrÃ©er section Quiz avec deux types :

## 1ï¸âƒ£ Quiz systÃ¨me (IA simulÃ©e frontend)

## 2ï¸âƒ£ Quiz envoyÃ© par tutor

CrÃ©er composants :

* QuizList
* QuizCard
* QuizPlayer
* QuizResult

Fonctionnement :

* Question
* RÃ©ponses choix multiple
* Calcul score
* Affichage score final

Pas de backend rÃ©el pour lâ€™instant (mock data).

---

# ğŸ“… AGENDA (LEARNER)

Activer bouton "Reprogrammer"

CrÃ©er :

`RescheduleModal`

Permet :

* Choisir nouvelle date
* VÃ©rifier conflit
* Confirmer

Frontend uniquement.

---

# ğŸ‘¨â€ğŸ« COMPTE TUTOR

---

# 1ï¸âƒ£ DisponibilitÃ©s style Preply

CrÃ©er :

`AvailabilityManager`

UI similaire Preply :

* Jours de la semaine
* Toggle actif/inactif
* Plages horaires multiples par jour
* Ajouter plage
* Supprimer plage
* Copier vers autres jours

Composants :

* DayAvailabilityRow
* TimeRangePicker
* AddTimeRangeButton

Tout commentÃ©.

---

# 2ï¸âƒ£ Chat

CrÃ©er systÃ¨me chat UI :

* ChatLayout
* ConversationList
* ChatWindow
* MessageBubble
* MessageInput

Simulation locale pour lâ€™instant.

---

# 3ï¸âƒ£ Mon Centre (Tutor)

Remplacer "Trouver un centre"

Si tutor a un centre :

* Infos centre
* PropriÃ©taire
* Date crÃ©ation
* Autres tuteurs

Sinon :

* Liste centres filtrable

RÃ©utiliser CenterCard + CenterDetail.

---

# 4ï¸âƒ£ Profil Public

Ajouter section :

"MatiÃ¨res enseignÃ©es"

Composant :
`SubjectsSection`

---

# ğŸ¢ COMPTE PROPRIÃ‰TAIRE

âš ï¸ Peut aussi Ãªtre tutor (ne pas casser logique existante).

---

# Dashboard

Ajouter bande annonce comme learner et tutor.

---

# Gestion Tuteurs

CrÃ©er :

* TutorManagementList
* TutorRequestCard

Fonctions :

* Accepter
* Refuser
* Retirer du centre

Frontend simulÃ©.

---

# Gestion Apprenants

CrÃ©er :

* LearnerManagementList
* LearnerRequestCard

MÃªme logique.

---

# Chat (PropriÃ©taire)

Peut Ã©crire :

* Tutor
* Learner

RÃ©utiliser systÃ¨me chat existant.

---

# Agenda + VisioconfÃ©rence

CrÃ©er :

* CenterAgendaView
* VideoCallLayout (UI seulement)

---

# Profil â†’ Mon Centre

Section modifiable :

* Nom
* MatiÃ¨res enseignÃ©es
* Langues parlÃ©es exigÃ©es

---

# ğŸ”” NOTIFICATIONS (TOUS LES COMPTES)

Rendre bouton topbar fonctionnel.

CrÃ©er :

* NotificationDropdown
* NotificationItem

Ajouter badge compteur rouge avec chiffre.

Badge disparaÃ®t quand :

* Notification lue

MÃªme logique pour :

ğŸ’¬ Messages

CrÃ©er hook :

`useUnreadCount()`

---


Composants courts.
Bien commentÃ©s.
RÃ©utilisables.

---

# ğŸš« INTERDICTIONS

* Ne pas modifier logique existante.
* Ne pas implÃ©menter backend rÃ©el.
* Ne pas connecter Stripe.
* Ne pas casser routing actuel.

---

# ğŸ¯ OBJECTIF

Architecture propre.
Scalable.
Lisible.
Professionnelle.
Frontend first.

---

Si tu veux, maintenant je peux :

* Te structurer lâ€™ordre dâ€™implÃ©mentation optimal
* Ou te dÃ©couper Ã§a en phases pour Ã©viter que Cursor parte dans tous les sens ğŸš€
